{"componentChunkName":"component---src-templates-blog-post-js","path":"/airflow/","result":{"data":{"site":{"siteMetadata":{"title":"The Matrix"}},"markdownRemark":{"id":"f1a76c03-ce49-5233-abe3-53ba6ff8f62e","excerpt":"Install airflow Chosen version airflow version: 3.0.1\npython version: 3.11.12\ndocker installation: no Installation setup airflow home directory: install airflowâ€¦","html":"<h1>Install airflow</h1>\n<h2>Chosen version</h2>\n<p>airflow version: <em><strong>3.0.1</strong></em>\npython version: <em><strong>3.11.12</strong></em>\ndocker installation: <em><strong>no</strong></em></p>\n<h2>Installation</h2>\n<p>setup airflow home directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span>  <span class=\"token assign-left variable\">AIRFLOW_HOME</span><span class=\"token operator\">=~</span>/airflow</code></pre></div>\n<p>install airflow</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip  <span class=\"token function\">install</span>  <span class=\"token string\">\"apache-airflow[celery]==3.0.1\"</span>  <span class=\"token parameter variable\">--constraint</span>  <span class=\"token string\">\"https://raw.githubusercontent.com/apache/airflow/constraints-3.0.1/constraints-3.11.txt\"</span></code></pre></div>\n<p>note: <strong>3.11</strong> means using <strong>python 3.11</strong></p>\n<p>initialise database:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">airflow db migrate</code></pre></div>\n<p>get the initial password</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~/airflow\n<span class=\"token function\">cat</span> simple_auth_manager_passwords.json.generated</code></pre></div>\n<p>The output should look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"admin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tqp8vGzhx434pnPV\"</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Run airflow</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">airflow standalone</code></pre></div>\n<p>login at: <a href=\"https://localhost:8080/\">https://localhost:8080/</a></p>\n<h2>Create a simple dag file</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ~/airflow/dags/simple_dag.py</span>\nfrom airflow <span class=\"token function\">import</span> DAG\nfrom airflow.operators.python <span class=\"token function\">import</span> PythonOperator\nfrom datetime <span class=\"token function\">import</span> datetime, timedelta\n\n<span class=\"token comment\"># Define a simple Python function</span>\ndef greet<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:\n    print<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello from Airflow!\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Default arguments for the DAG</span>\ndefault_args <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'owner'</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">'airflow'</span>,\n    <span class=\"token string\">'retries'</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>,\n    <span class=\"token string\">'retry_delay'</span><span class=\"token builtin class-name\">:</span> timedelta<span class=\"token punctuation\">(</span>minutes<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>,\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># Define the DAG</span>\nwith DAG<span class=\"token punctuation\">(</span>\n    <span class=\"token assign-left variable\">dag_id</span><span class=\"token operator\">=</span><span class=\"token string\">'simple_greet_dag'</span>,\n    <span class=\"token assign-left variable\">default_args</span><span class=\"token operator\">=</span>default_args,\n    <span class=\"token assign-left variable\">description</span><span class=\"token operator\">=</span><span class=\"token string\">'A simple DAG that greets'</span>,\n    <span class=\"token assign-left variable\">schedule</span><span class=\"token operator\">=</span><span class=\"token string\">'@daily'</span>,\n    <span class=\"token assign-left variable\">start_date</span><span class=\"token operator\">=</span>datetime<span class=\"token punctuation\">(</span><span class=\"token number\">2024</span>, <span class=\"token number\">1</span>, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>,\n    <span class=\"token assign-left variable\">catchup</span><span class=\"token operator\">=</span>False,\n<span class=\"token punctuation\">)</span> as dag:\n\n    <span class=\"token comment\"># Define the task</span>\n    greet_task <span class=\"token operator\">=</span> PythonOperator<span class=\"token punctuation\">(</span>\n        <span class=\"token assign-left variable\">task_id</span><span class=\"token operator\">=</span><span class=\"token string\">'greet_task'</span>,\n        <span class=\"token assign-left variable\">python_callable</span><span class=\"token operator\">=</span>greet\n    <span class=\"token punctuation\">)</span>\n\n    greet_task</code></pre></div>","frontmatter":{"title":"How to install airflow","date":"May 25, 2025","description":"A simple airflow installation guide"}},"previous":{"fields":{"slug":"/gcloudfunction/"},"frontmatter":{"title":"Reduce cost using Google Cloud Function"}},"next":{"fields":{"slug":"/blt/"},"frontmatter":{"title":"How to use blt to migrate data"}}},"pageContext":{"id":"f1a76c03-ce49-5233-abe3-53ba6ff8f62e","previousPostId":"ada510ee-ec9a-5eba-b80a-c0f946c5f75f","nextPostId":"dac157a0-37ca-5364-8eac-30041762b4ff"}},"staticQueryHashes":["2841359383","4135132960"],"slicesMap":{}}