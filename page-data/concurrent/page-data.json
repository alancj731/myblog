{"componentChunkName":"component---src-templates-blog-post-js","path":"/concurrent/","result":{"data":{"site":{"siteMetadata":{"title":"The Matrix"}},"markdownRemark":{"id":"e4812746-0434-53b3-97d1-32869ddd5b27","excerpt":"ğŸ’¡ Tip for Working with Concurrent Tasks When managing concurrent tasksâ€”especially when grouping data by a key â€”be careful to use Array or Map to store theâ€¦","html":"<h3>ğŸ’¡ Tip for Working with Concurrent Tasks</h3>\n<p>When managing concurrent tasksâ€”especially when grouping data by a key â€”be careful to use Array or Map to store the intermediate or final results.</p>\n<h3>ğŸ” Why?</h3>\n<p>Check the first code snippet, where multiple tasks fetch project data and try to group projects by userId. When using an array to check for existing user recordsâ€”as shown in the first code snippetâ€”this approach can fail in a concurrent environment. Since each task may not be aware of changes made by others, it can result in duplicate entries for the same userId. Replacing the array with a Map doesn't fix the problem either.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/myblog/static/53e93dbb0a34bde0dc0301d19c870eea/acb04/one.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcmIhC//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAABEAARITFB/9oACAEBAAE/IRrsKvD/AP/aAAwDAQACAAMAAAAQ5M//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAADAAEFAAAAAAAAAAAAAAAAAREQITFBcYH/2gAIAQEAAT8QRtHPCNPE7KUt0G68f//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"code snippet\"\n        title=\"\"\n        src=\"/myblog/static/53e93dbb0a34bde0dc0301d19c870eea/828fb/one.jpg\"\n        srcset=\"/myblog/static/53e93dbb0a34bde0dc0301d19c870eea/ff44c/one.jpg 158w,\n/myblog/static/53e93dbb0a34bde0dc0301d19c870eea/a6688/one.jpg 315w,\n/myblog/static/53e93dbb0a34bde0dc0301d19c870eea/828fb/one.jpg 630w,\n/myblog/static/53e93dbb0a34bde0dc0301d19c870eea/acb04/one.jpg 750w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>âœ… The Fix:</h3>\n<p>Let all concurrent tasks complete first, then group the data afterward. This approach avoids race conditions and ensures that all projects for a given user are accurately grouped.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/myblog/static/274ac0ff7dbe981dde573f92b7ad9bd1/51aac/two.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.44303797468356%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcgJAtgQH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEAAQUCH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CH//EABkQAAIDAQAAAAAAAAAAAAAAAAEQABExQf/aAAgBAQABPyEZDXEMhpcf/9oADAMBAAIAAwAAABCkADz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAcEAEAAQQDAAAAAAAAAAAAAAABABARIXGBkeH/2gAIAQEAAT8QQZPUfoS8Rg2i25o1f//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"code snippet\"\n        title=\"\"\n        src=\"/myblog/static/274ac0ff7dbe981dde573f92b7ad9bd1/828fb/two.jpg\"\n        srcset=\"/myblog/static/274ac0ff7dbe981dde573f92b7ad9bd1/ff44c/two.jpg 158w,\n/myblog/static/274ac0ff7dbe981dde573f92b7ad9bd1/a6688/two.jpg 315w,\n/myblog/static/274ac0ff7dbe981dde573f92b7ad9bd1/828fb/two.jpg 630w,\n/myblog/static/274ac0ff7dbe981dde573f92b7ad9bd1/51aac/two.jpg 757w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Concurrent tasks","date":"May 09, 2025","description":"Becareful to use Array or Map to save the final results"}},"previous":null,"next":{"fields":{"slug":"/ratelimiting/"},"frontmatter":{"title":"Rate Limiting in Express"}}},"pageContext":{"id":"e4812746-0434-53b3-97d1-32869ddd5b27","previousPostId":null,"nextPostId":"d36292a8-35b2-5f3a-a2dc-b877c4a36f14"}},"staticQueryHashes":["2841359383","4135132960"],"slicesMap":{}}